
<!doctype html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Journeys Demo</title>
  <script>
    // load Branch
    (function(b,r,a,n,c,h,_,s,d,k){if(!b[n]||!b[n]._q){for(;s<_.length;)c(h,_[s++]);d=r.createElement(a);d.async=1;d.src="https://cdn.branch.io/branch-latest.min.js";k=r.getElementsByTagName(a)[0];k.parentNode.insertBefore(d,k);b[n]=h}})(window,document,"script","branch",function(b,r){b[r]=function(){b._q.push([r,arguments])}},{_q:[],_v:1},"addListener applyCode autoAppIndex banner closeBanner closeJourney creditHistory credits data deepview deepviewCta first getCode init link logout redeem referrals removeListener sendSMS setBranchViewData setIdentity track validateCode trackCommerceEvent logEvent disableTracking".split(" "), 0);
    // init Branch
    branch.init('key_live_lpLZ0z6TvFWnDSsifeLbDiborBhqzffg',
	{ metadata : { 'launchBanner' : 'true' } }
		);
  </script>
	<style>
	.button{
		cursor: pointer;
		border-radius: 12px; 
		background-color: #008CBA; 
		border: none; 
		color: white; 
		padding: 12px 32px; 
		text-align: center; 
		text-decoration: none; 
		display: inline-block; 
		font-size: 16px; 
		box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2), 0 6px 20px 0 rgba(0,0,0,0.19); 
		width:100%; 
		margin: 5px 0px 5px 0px;
		}
	</style>
	<script>	 
		function launchPill(){
			console.log("launchPill called");

			//close any Journeys, if they are currently open
			closeBranchJourney();

			//launch journey with flags to disable banner animations
			branch.track('pageview',{
			    'JourneyType':'Pill'
			});
		}
		
		// manually launch bottom banner journey set via targeting metadata
		    function launchBottomBanner(){
			console.log("launchBottomBanner called");

			//close any Journeys, if they are currently open
			closeBranchJourney();

			//launch journey with flags to disable banner animations
			branch.track('pageview',{
			    'JourneyType':'BottomBanner'
			},{
			    'disable_entry_animation':true,
			    'disable_exit_animation':true
			});
		    }
		
		// manually launch top banner journey set via targeting metadata
		    function launchTopBanner(){
			console.log("launchTopBanner called");

			//close any Journeys, if they are currently open
			closeBranchJourney();

			//launch journey with flags to disable banner animations
			branch.track('pageview',{
			    'JourneyType':'TopBanner'
			},{
			    'disable_entry_animation':true,
			    'disable_exit_animation':true
			});
		    }
	    

    			// manually launch full page journey set via targeting metadata
		    function launchFullPage(){
			console.log("FullPage called");

			//close any Journeys, if they are currently open
			closeBranchJourney();

			//launch journey with flags to disable banner animations
			branch.track('pageview',{
			    'JourneyType':'FullPage'
			},{
			    'disable_entry_animation':true,
			    'disable_exit_animation':true
			});
		    }
		
		function doesJourneyExistOnPage() {
			var branchBannerIframe = document.getElementById("branch-banner-iframe");
			if (branchBannerIframe) {
			    console.log(branchBannerIframe.src);
			    return true;
			}
			return false;
   		 }
		
		function closeBranchJourney(){        
		if(doesJourneyExistOnPage()){
		    //this is the call that closes the journey, with flags that disable the banner animations
		    console.log("closeBranchJourney called");
		    branch.closeJourney(function(err) {});
		} else {
		    console.log("No Banner on the page");
		}
    }	
	</script>
</head>
<body>
	<h1> Journeys Demo </h1>
        <div>
     
                <button onclick="launchPill()" onmouseover="" class="button">Launch Pill</button>        
		<button onclick="launchBottomBanner()" onmouseover="" class="button">Launch Bottom Banner</button>
                <button onclick="launchTopBanner()" onmouseover="" class="button">Launch Top Banner</button>
                <button onclick="launchFullPage()" onmouseover="" class="button">Launch Full Page</button>
		<select name="banners" id="banners" class="button" onChange="launchBottomBanner()">
		  <option value="pill" onclick="launchPill()">Launch Pill</option>
		  <option value="bottom" onclick="launchBottomBanner()">Launch Bottom Banner</option>
		  <option value="top" onclick="launchTopBanner()">Launch Top Banner</option>
		  <option value="full" onclick="launchFullPage()">Launch Full Page</option>
		</select>
   
        </div>

</body>
</html>
