
<!doctype html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Journeys Demo</title>
  <script>
    // load Branch
    (function(b,r,a,n,c,h,_,s,d,k){if(!b[n]||!b[n]._q){for(;s<_.length;)c(h,_[s++]);d=r.createElement(a);d.async=1;d.src="https://cdn.branch.io/branch-latest.min.js";k=r.getElementsByTagName(a)[0];k.parentNode.insertBefore(d,k);b[n]=h}})(window,document,"script","branch",function(b,r){b[r]=function(){b._q.push([r,arguments])}},{_q:[],_v:1},"addListener applyCode autoAppIndex banner closeBanner closeJourney creditHistory credits data deepview deepviewCta first getCode init link logout redeem referrals removeListener sendSMS setBranchViewData setIdentity track validateCode trackCommerceEvent logEvent disableTracking".split(" "), 0);
    // init Branch
    branch.init('key_live_lpLZ0z6TvFWnDSsifeLbDiborBhqzffg');
  </script>
	<style>
	.button{
		cursor: pointer;
		border-radius: 12px; 
		background-color: #008CBA; 
		border: none; 
		color: white; 
		padding: 12px 32px; 
		text-align: center; 
		text-decoration: none; 
		display: inline-block; 
		font-size: 16px; 
		box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2), 0 6px 20px 0 rgba(0,0,0,0.19); 
		width:100%; 
		margin: 5px 0px 5px 0px;
		}
	</style>
</head>
<body>
	<h1> Journeys Demo </h1>
        <div>
     
                        <button onclick="launchBranchJourney()" onmouseover="" class="button">Launch Banner</button>
                        <button onclick="launchBranchJourneyNewCTA()" onmouseover="" >Launch Banner w/Custom Redirect</button>
                        <button onclick="launchTopBanner()" onmouseover="" style="cursor: pointer; border-radius: 12px; background-color: #008CBA; border: none; color: white; padding: 12px 32px; text-align: center; text-decoration: none; display: inline-block; font-size: 16px; box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2), 0 6px 20px 0 rgba(0,0,0,0.19); width:100%; margin: 5px 0px 5px 0px;">Launch Top Banner</button>
                        <button onclick="launchBottomHalfPage()" onmouseover="" style="cursor: pointer; border-radius: 12px; background-color: #008CBA; border: none; color: white; padding: 12px 32px; text-align: center; text-decoration: none; display: inline-block; font-size: 16px; box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2), 0 6px 20px 0 rgba(0,0,0,0.19); width:100%; margin: 5px 0px 5px 0px;">Launch Bottom Half Page</button>
                        <button onclick="launchPill()" onmouseover="" style="cursor: pointer; border-radius: 12px; background-color: #008CBA; border: none; color: white; padding: 12px 32px; text-align: center; text-decoration: none; display: inline-block; font-size: 16px; box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2), 0 6px 20px 0 rgba(0,0,0,0.19); width:100%; margin: 5px 0px 5px 0px;">Launch Pill</button>
                        <button onclick="launchFloatingOverlay()" onmouseover="" style="cursor: pointer; border-radius: 12px; background-color: #008CBA; border: none; color: white; padding: 12px 32px; text-align: center; text-decoration: none; display: inline-block; font-size: 16px; box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2), 0 6px 20px 0 rgba(0,0,0,0.19); width:100%; margin: 5px 0px 5px 0px;">Launch Floating Overlay</button>
                        <button onclick="launchFullPage()" onmouseover="" style="cursor: pointer; border-radius: 12px; background-color: #008CBA; border: none; color: white; padding: 12px 32px; text-align: center; text-decoration: none; display: inline-block; font-size: 16px; box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2), 0 6px 20px 0 rgba(0,0,0,0.19); width:100%; margin: 5px 0px 5px 0px;">Launch Full Page (COMPLETE_REGISTRATION)</button>
   
        </div>
	
<script>
/ manually launch journey & change link data (will NOT launch if banner's dismissal period active)
    function launchBranchJourney(){
        console.log("launchBranchJourney called");

        //new link & analytics data for banner
        var linkData = {
            campaign: 'set by SBVD',
            feature: 'set by SBVD',
            channel: 'set by SBVD',
            stage: 'set by SBVD',
            tags: ['set by SBVD'],
            data: {
                'text3': 'set by SBVD',
                '$canonical_url': window.location.href
            }
        };
        branch.setBranchViewData(linkData);
        	
	//close any Journeys, if they are currently open
	closeBranchJourney();
        
        //launch journey with flags to disable banner animations
        branch.track('pageview',{
            'targeting':'metadata'
        },{
            'disable_entry_animation':true,
            'disable_exit_animation':true
        });
    }
	    
    // manually launch journey & change banner redirect
    function launchBranchJourneyNewCTA(){
        console.log("launchBranchJourney called");

        //new link & analytics data for banner
        var linkData = {
            campaign: 'set by SBVD',
            feature: 'set by SBVD',
            channel: 'set by SBVD',
            stage: 'set by SBVD',
            tags: ['set by SBVD'],
            data: {
                'text3': 'set by SBVD',
                '$canonical_url': window.location.href,
                '$journeys_cta' : 'https://branch.io'
            }
        };
        branch.setBranchViewData(linkData);
        	
	//close any Journeys, if they are currently open
	closeBranchJourney();
        
        //launch journey with flags to disable banner animations
        branch.track('pageview',{
            'targeting':'metadata'
        },{
            'disable_entry_animation':true,
            'disable_exit_animation':true
        });
    }
	    
    // manually launch top banner journey set via targeting metadata
    function launchTopBanner(){
        console.log("launchTopBanner called");
        	
	//close any Journeys, if they are currently open
	closeBranchJourney();
        
        //launch journey with flags to disable banner animations
        branch.track('pageview',{
            'JourneyType':'TopBanner'
        },{
            'disable_entry_animation':true,
            'disable_exit_animation':true
        });
    }
	    
    // manually launch bottom half page journey set via targeting metadata
    function launchBottomHalfPage(){
        console.log("launchBottomHalfPage called");
        	
	//close any Journeys, if they are currently open
	closeBranchJourney();
        
        //launch journey with flags to disable banner animations
        branch.track('pageview',{
            'JourneyType':'BottomHalfPage'
        },{
            'disable_entry_animation':true,
            'disable_exit_animation':true
        });
    }

    // manually launch pill journey set via targeting metadata
    function launchPill(){
        console.log("launchPill called");
        	
	//close any Journeys, if they are currently open
	closeBranchJourney();
        
        //launch journey with flags to disable banner animations
        branch.track('pageview',{
            'JourneyType':'Pill'
        },{
            'disable_entry_animation':true,
            'disable_exit_animation':true
        });
    }
	    
    // manually launch floating overlay journey set via targeting metadata
    function launchFloatingOverlay(){
        console.log("FloatingOverlay called");
	
	//close any Journeys, if they are currently open
	closeBranchJourney();
        
        //launch journey with flags to disable banner animations
        branch.track('pageview',{
            'JourneyType':'FloatingOverlay'
        },{
            'disable_entry_animation':true,
            'disable_exit_animation':true
        });
    }
	    
    // manually launch full page journey set via targeting metadata
    function launchFullPage(){
        console.log("FullPage called");
        	
	//close any Journeys, if they are currently open
	closeBranchJourney();
        
        //launch journey with flags to disable banner animations
        branch.track('pageview',{
            'JourneyType':'FullPage'
        },{
            'disable_entry_animation':true,
            'disable_exit_animation':true
        });
    }
	    
    //function to check if a banner is displaying
    function doesJourneyExistOnPage() {
        var branchBannerIframe = document.getElementById("branch-banner-iframe");
        if (branchBannerIframe) {
            console.log(branchBannerIframe.src);
            return true;
        }
        return false;
    }

    // function for button to close journey (will NOT activate template's dismissal period)
    function closeBranchJourney(){        
        if(doesJourneyExistOnPage()){
            //this is the call that closes the journey, with flags that disable the banner animations
            console.log("closeBranchJourney called");
            branch.closeJourney(function(err) {});
        } else {
            console.log("No Banner on the page");
        }
    }	
</script>
	
</body>
</html>
